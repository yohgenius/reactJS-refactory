["f502de79cebe855cd772b8b91d6c5135a49ef006","8443b4ce3a94067005fb008bc5e69d84f8bf2e09",["ReactGlobalSharedState","ReactDebugTool"],[282,686,1095,1512,2065,2240],{"version":3,"sources":["/firstPro/node_modules/react-native/Libraries/Performance/Systrace.js"],"names":["TRACE_TAG_REACT_APPS","TRACE_TAG_JSC_CALLS","_enabled","_asyncCookie","ReactSystraceDevtool","__DEV__","onBeforeMountComponent","debugID","ReactComponentTreeHook","require","displayName","getDisplayName","Systrace","beginEvent","onMountComponent","endEvent","onBeforeUpdateComponent","onUpdateComponent","onBeforeUnmountComponent","onUnmountComponent","onBeginLifeCycleTimer","timerType","onEndLifeCycleTimer","setEnabled","enabled","global","nativeTraceBeginLegacy","addHook","nativeTraceEndLegacy","removeHook","isEnabled","profileName","args","nativeTraceBeginSection","nativeTraceEndSection","beginAsyncEvent","cookie","nativeTraceBeginAsyncSection","endAsyncEvent","nativeTraceEndAsyncSection","counterEvent","value","nativeTraceCounter","attachToRelayProfiler","relayProfiler","attachProfileHandler","name","attachAggregateHandler","callback","swizzleJSON","measureMethods","JSON","object","objectName","methodNames","forEach","methodName","measure","objName","fnName","func","apply","arguments","ret","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Systrace\n * @flow\n */\n'use strict';\n\ntype RelayProfiler = {\n  attachProfileHandler(\n    name: string,\n    handler: (name: string, state?: any) => () => void\n  ): void,\n\n  attachAggregateHandler(\n    name: string,\n    handler: (name: string, callback: () => void) => void\n  ): void,\n};\n\n/* eslint no-bitwise: 0 */\nconst TRACE_TAG_REACT_APPS = 1 << 17;\nconst TRACE_TAG_JSC_CALLS = 1 << 27;\n\nlet _enabled = false;\nlet _asyncCookie = 0;\n\nconst ReactSystraceDevtool = __DEV__ ? {\n  onBeforeMountComponent(debugID) {\n    const ReactComponentTreeHook = require('ReactGlobalSharedState').ReactComponentTreeHook;\n    const displayName = ReactComponentTreeHook.getDisplayName(debugID);\n    Systrace.beginEvent(`ReactReconciler.mountComponent(${displayName})`);\n  },\n  onMountComponent(debugID) {\n    Systrace.endEvent();\n  },\n  onBeforeUpdateComponent(debugID) {\n    const ReactComponentTreeHook = require('ReactGlobalSharedState').ReactComponentTreeHook;\n    const displayName = ReactComponentTreeHook.getDisplayName(debugID);\n    Systrace.beginEvent(`ReactReconciler.updateComponent(${displayName})`);\n  },\n  onUpdateComponent(debugID) {\n    Systrace.endEvent();\n  },\n  onBeforeUnmountComponent(debugID) {\n    const ReactComponentTreeHook = require('ReactGlobalSharedState').ReactComponentTreeHook;\n    const displayName = ReactComponentTreeHook.getDisplayName(debugID);\n    Systrace.beginEvent(`ReactReconciler.unmountComponent(${displayName})`);\n  },\n  onUnmountComponent(debugID) {\n    Systrace.endEvent();\n  },\n  onBeginLifeCycleTimer(debugID, timerType) {\n    const ReactComponentTreeHook = require('ReactGlobalSharedState').ReactComponentTreeHook;\n    const displayName = ReactComponentTreeHook.getDisplayName(debugID);\n    Systrace.beginEvent(`${displayName}.${timerType}()`);\n  },\n  onEndLifeCycleTimer(debugID, timerType) {\n    Systrace.endEvent();\n  },\n} : null;\n\nconst Systrace = {\n  setEnabled(enabled: boolean) {\n    if (_enabled !== enabled) {\n      if (__DEV__) {\n        if (enabled) {\n          global.nativeTraceBeginLegacy && global.nativeTraceBeginLegacy(TRACE_TAG_JSC_CALLS);\n          require('ReactDebugTool').addHook(ReactSystraceDevtool);\n        } else {\n          global.nativeTraceEndLegacy && global.nativeTraceEndLegacy(TRACE_TAG_JSC_CALLS);\n          require('ReactDebugTool').removeHook(ReactSystraceDevtool);\n        }\n      }\n      _enabled = enabled;\n    }\n  },\n\n  isEnabled(): boolean {\n    return _enabled;\n  },\n\n  /**\n   * beginEvent/endEvent for starting and then ending a profile within the same call stack frame\n  **/\n  beginEvent(profileName?: any, args?: any) {\n    if (_enabled) {\n      profileName = typeof profileName === 'function' ?\n        profileName() : profileName;\n      global.nativeTraceBeginSection(TRACE_TAG_REACT_APPS, profileName, args);\n    }\n  },\n\n  endEvent() {\n    if (_enabled) {\n      global.nativeTraceEndSection(TRACE_TAG_REACT_APPS);\n    }\n  },\n\n  /**\n   * beginAsyncEvent/endAsyncEvent for starting and then ending a profile where the end can either\n   * occur on another thread or out of the current stack frame, eg await\n   * the returned cookie variable should be used as input into the endAsyncEvent call to end the profile\n  **/\n  beginAsyncEvent(profileName?: any): any {\n    const cookie = _asyncCookie;\n    if (_enabled) {\n      _asyncCookie++;\n      profileName = typeof profileName === 'function' ?\n        profileName() : profileName;\n      global.nativeTraceBeginAsyncSection(TRACE_TAG_REACT_APPS, profileName, cookie, 0);\n    }\n    return cookie;\n  },\n\n  endAsyncEvent(profileName?: any, cookie?: any) {\n    if (_enabled) {\n      profileName = typeof profileName === 'function' ?\n        profileName() : profileName;\n      global.nativeTraceEndAsyncSection(TRACE_TAG_REACT_APPS, profileName, cookie, 0);\n    }\n  },\n\n  /**\n   * counterEvent registers the value to the profileName on the systrace timeline\n  **/\n  counterEvent(profileName?: any, value?: any) {\n    if (_enabled) {\n      profileName = typeof profileName === 'function' ?\n        profileName() : profileName;\n      global.nativeTraceCounter &&\n        global.nativeTraceCounter(TRACE_TAG_REACT_APPS, profileName, value);\n    }\n  },\n\n  /**\n   * Relay profiles use await calls, so likely occur out of current stack frame\n   * therefore async variant of profiling is used\n  **/\n  attachToRelayProfiler(relayProfiler: RelayProfiler) {\n    relayProfiler.attachProfileHandler('*', (name) => {\n      const cookie = Systrace.beginAsyncEvent(name);\n      return () => {\n        Systrace.endAsyncEvent(name, cookie);\n      };\n    });\n\n    relayProfiler.attachAggregateHandler('*', (name, callback) => {\n      Systrace.beginEvent(name);\n      callback();\n      Systrace.endEvent();\n    });\n  },\n\n  /* This is not called by default due to perf overhead but it's useful\n     if you want to find traces which spend too much time in JSON. */\n  swizzleJSON() {\n    Systrace.measureMethods(JSON, 'JSON', [\n      'parse',\n      'stringify'\n    ]);\n  },\n\n /**\n  * Measures multiple methods of a class. For example, you can do:\n  * Systrace.measureMethods(JSON, 'JSON', ['parse', 'stringify']);\n  *\n  * @param object\n  * @param objectName\n  * @param methodNames Map from method names to method display names.\n  */\n measureMethods(object: any, objectName: string, methodNames: Array<string>): void {\n   if (!__DEV__) {\n     return;\n   }\n\n   methodNames.forEach(methodName => {\n     object[methodName] = Systrace.measure(\n       objectName,\n       methodName,\n       object[methodName]\n     );\n   });\n },\n\n /**\n  * Returns an profiled version of the input function. For example, you can:\n  * JSON.parse = Systrace.measure('JSON', 'parse', JSON.parse);\n  *\n  * @param objName\n  * @param fnName\n  * @param {function} func\n  * @return {function} replacement function\n  */\n measure(objName: string, fnName: string, func: any): any {\n   if (!__DEV__) {\n     return func;\n   }\n\n   const profileName = `${objName}.${fnName}`;\n   return function() {\n     if (!_enabled) {\n       return func.apply(this, arguments);\n     }\n\n     Systrace.beginEvent(profileName);\n     const ret = func.apply(this, arguments);\n     Systrace.endEvent();\n     return ret;\n   };\n },\n};\n\nif (__DEV__) {\n  // This is needed, because require callis in polyfills are not processed as\n  // other files. Therefore, calls to `require('moduleId')` are not replaced\n  // with numeric IDs\n  // TODO(davidaurelio) Scan polyfills for dependencies, too (t9759686)\n  (require: any).Systrace = Systrace;\n}\n\nmodule.exports = Systrace;\n"]}]