["7599dc185a1e29ad038d63b443f3120a2e728105","6fde8f606973b95b34b5f63283f4665ad116f4b1",["react","prop-types","react-native"],[157,252,362],{"version":3,"sources":["/firstPro/node_modules/expo/src/BarCodeScanner.js"],"names":["BarCodeScannerManager","ExponentBarCodeScannerManager","ExponentBarCodeScannerModule","convertNativeProps","props","newProps","torchMode","BarCodeScanner","Constants","TorchMode","type","Type","EventThrottleMs","_onBarCodeRead","nativeEvent","_lastEvent","JSON","stringify","Date","_lastEventTime","onBarCodeRead","refs","CAMERA_REF","setNativeProps","nativeProps","Component","BarCodeType","propTypes","func","barCodeTypes","array","oneOfType","string","number","defaultProps","back","off","Object","values","ExponentBarCodeScanner","nativeOnly"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;AAMA,IAAMA,wBACJ,2BAAcC,6BAAd,IACA,2BAAcC,4BAFhB;;AAIA,SAASC,kBAAT,CAA4BC,KAA5B,EAAmC;AACjC,MAAMC,oCAAgBD,KAAhB,CAAN;AACA,MAAI,OAAOA,MAAME,SAAb,KAA2B,QAA/B,EAAyC;AACvCD,aAASC,SAAT,GAAqBC,eAAeC,SAAf,CAAyBC,SAAzB,CAAmCL,MAAME,SAAzC,CAArB;AACD;;AAED,MAAI,OAAOF,MAAMM,IAAb,KAAsB,QAA1B,EAAoC;AAClCL,aAASK,IAAT,GAAgBH,eAAeC,SAAf,CAAyBG,IAAzB,CAA8BP,MAAMM,IAApC,CAAhB;AACD;;AAED,SAAOL,QAAP;AACD;;AAED,IAAMO,kBAAkB,GAAxB;;IAEqBL,c;;;;;;;;;;;;;;kNAoCnBM,c,GAAiB,iBAAqB;AAAA,UAAlBC,WAAkB,SAAlBA,WAAkB;;AACpC,UACE,MAAKC,UAAL,IACAC,KAAKC,SAAL,CAAeH,WAAf,MAAgC,MAAKC,UADrC,IAEA,IAAIG,IAAJ,KAAa,MAAKC,cAAlB,GAAmCP,eAHrC,EAIE;AACA;AACD;;AAED,UAAI,MAAKR,KAAL,CAAWgB,aAAf,EAA8B;AAC5B,cAAKhB,KAAL,CAAWgB,aAAX,CAAyBN,WAAzB;AACA,cAAKC,UAAL,GAAkBC,KAAKC,SAAL,CAAeH,WAAf,CAAlB;AACA,cAAKK,cAAL,GAAsB,IAAID,IAAJ,EAAtB;AACD;AACF,K;;;;;mCA7Bcd,K,EAAO;AACpB,WAAKiB,IAAL,CAAUC,UAAV,EAAsBC,cAAtB,CAAqCnB,KAArC;AACD;;;6BAEQ;AACP,UAAMoB,cAAcrB,mBAAmB,KAAKC,KAAxB,CAApB;;AAEA,aACE,8BAAC,sBAAD,2BACMoB,WADN;AAEE,uBAAe,KAAKX;AAFtB,SADF;AAMD;;;EAlCyC,gBAAMY,S,UACzCjB,S,GAAY;AACjBkB,eAAa1B,sBAAsB0B,WADlB;AAEjBf,QAAMX,sBAAsBW,IAFX;AAGjBF,aAAWT,sBAAsBS;AAHhB,C,SAMZkB,S;AAELP,iBAAe,oBAAUQ,I;AACzBC,gBAAc,oBAAUC,K;AACxBxB,aAAW,oBAAUyB,SAAV,CAAoB,CAAC,oBAAUC,MAAX,EAAmB,oBAAUC,MAA7B,CAApB,C;AACXvB,QAAM,oBAAUqB,SAAV,CAAoB,CAAC,oBAAUC,MAAX,EAAmB,oBAAUC,MAA7B,CAApB;WAGDC,Y,GAAe;AACpBxB,QAAMV,sBAAsBW,IAAtB,CAA2BwB,IADb;AAEpB7B,aAAWN,sBAAsBS,SAAtB,CAAgC2B,GAFvB;AAGpBP,gBAAcQ,OAAOC,MAAP,CAActC,sBAAsB0B,WAApC;AAHM,C;kBAfHnB,c;AAqDd,IAAMC,gCAAYD,eAAeC,SAAjC;;AAEP,IAAM+B,yBAAyB,yCAC7B,wBAD6B,EAE7BhC,cAF6B,EAG7B;AACEiC,cAAY;AACVpB,mBAAe;AADL;AADd,CAH6B,CAA/B","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  NativeModules,\n  requireNativeComponent,\n  ViewPropTypes,\n} from 'react-native';\n\nconst BarCodeScannerManager =\n  NativeModules.ExponentBarCodeScannerManager ||\n  NativeModules.ExponentBarCodeScannerModule;\n\nfunction convertNativeProps(props) {\n  const newProps = { ...props };\n  if (typeof props.torchMode === 'string') {\n    newProps.torchMode = BarCodeScanner.Constants.TorchMode[props.torchMode];\n  }\n\n  if (typeof props.type === 'string') {\n    newProps.type = BarCodeScanner.Constants.Type[props.type];\n  }\n\n  return newProps;\n}\n\nconst EventThrottleMs = 500;\n\nexport default class BarCodeScanner extends React.Component {\n  static Constants = {\n    BarCodeType: BarCodeScannerManager.BarCodeType,\n    Type: BarCodeScannerManager.Type,\n    TorchMode: BarCodeScannerManager.TorchMode,\n  };\n\n  static propTypes = {\n    ...ViewPropTypes,\n    onBarCodeRead: PropTypes.func,\n    barCodeTypes: PropTypes.array,\n    torchMode: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    type: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  };\n\n  static defaultProps = {\n    type: BarCodeScannerManager.Type.back,\n    torchMode: BarCodeScannerManager.TorchMode.off,\n    barCodeTypes: Object.values(BarCodeScannerManager.BarCodeType),\n  };\n\n  setNativeProps(props) {\n    this.refs[CAMERA_REF].setNativeProps(props);\n  }\n\n  render() {\n    const nativeProps = convertNativeProps(this.props);\n\n    return (\n      <ExponentBarCodeScanner\n        {...nativeProps}\n        onBarCodeRead={this._onBarCodeRead}\n      />\n    );\n  }\n\n  _onBarCodeRead = ({ nativeEvent }) => {\n    if (\n      this._lastEvent &&\n      JSON.stringify(nativeEvent) === this._lastEvent &&\n      new Date() - this._lastEventTime < EventThrottleMs\n    ) {\n      return;\n    }\n\n    if (this.props.onBarCodeRead) {\n      this.props.onBarCodeRead(nativeEvent);\n      this._lastEvent = JSON.stringify(nativeEvent);\n      this._lastEventTime = new Date();\n    }\n  };\n}\n\nexport const Constants = BarCodeScanner.Constants;\n\nconst ExponentBarCodeScanner = requireNativeComponent(\n  'ExponentBarCodeScanner',\n  BarCodeScanner,\n  {\n    nativeOnly: {\n      onBarCodeRead: true,\n    },\n  }\n);\n"]}]